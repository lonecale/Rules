# ä»¥ '#' æˆ– '//' å¼€å¤´çš„é…ç½®æ–‡ä»¶è¡Œä¸ºæ³¨é‡Šè¡Œ
#
# Clash Verg Rev Version â‰¥ 1.6.2
#
# æœ€åæ›´æ–°æ—¶é—´: 2024-07-24 13:35
#
# ================

# HTTP(S) ä»£ç†æœåŠ¡å™¨ç«¯å£
port: 7890
# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891
# æ··åˆç«¯å£ï¼ŒHTTPå’ŒSOCKS5ç”¨ä¸€ä¸ªç«¯å£
mixed-port: 7892
# é€æ˜ä»£ç†ç«¯å£ï¼Œç”¨äº Linux å’Œ MacOS
redir-port: 7893
# Transparent proxy server port for Linux (TProxy TCP and TProxy UDP)
tproxy-port: 7894

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: true
# ç›‘å¬IPç™½åå•ï¼Œå¯ç»‘å®šå•ä¸ªIPv4å’Œv6åœ°å€ï¼Œ"*" ä¸ºç»‘å®šæ‰€æœ‰IPåœ°å€ï¼Œä»…åœ¨å°†allow-lanè®¾ç½®ä¸ºtrueæ—¶é€‚ç”¨
bind-address: "*"
# æ˜¯å¦å…è®¸å†…æ ¸æ¥å— IPv6 æµé‡
ipv6: false
# è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰/ script (è„šæœ¬)
mode: rule
# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«: silent/error/warning/info/debug
log-level: info
# æ˜¯å¦å…è®¸ UDP é€šè¿‡ä»£ç†ï¼Œé»˜è®¤ä¸º false
udp: true

# TCP Keep Alive åŒ…çš„é—´éš”ï¼Œå•ä½ä¸ºç§’
keep-alive-interval: 600
# TCP Keep Alive çš„æœ€å¤§ç©ºé—²æ—¶é—´
keep-alive-idle: 600
# ç¦ç”¨ TCP Keep Aliveï¼Œåœ¨ Android é»˜è®¤ä¸º true
disable-keep-alive: false

# å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶ï¼Œä¼šè¿›è¡Œä¸¤æ¬¡å»¶è¿Ÿæµ‹è¯•ï¼Œä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚ï¼Œå¯é€‰å€¼ true/false
unified-delay: true 
# TCP å¹¶å‘ï¼Œå¯é€‰å€¼ true/false
tcp-concurrent: true
# æ§åˆ¶æ˜¯å¦è®© Clash å»åŒ¹é…è¿›ç¨‹ï¼Œalways å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹ï¼Œstrict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯ï¼Œoff ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict
# å…¨å±€ TLS æŒ‡çº¹ï¼Œä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprintï¼Œç›®å‰æ”¯æŒå¼€å¯ TLS ä¼ è¾“çš„ TCP/grpc/WS/HTTP , æ”¯æŒåè®®æœ‰ VLESS,Vmess å’Œ trojan
# å¯é€‰ï¼š"chrome", "firefox", "safari", "iOS", "android", "edge", "360"," qq", "random"
# è‹¥é€‰æ‹© "random", åˆ™æŒ‰ Cloudflare Radar æ•°æ®æŒ‰æ¦‚ç‡ç”Ÿæˆä¸€ä¸ªç°ä»£æµè§ˆå™¨æŒ‡çº¹ã€‚
global-client-fingerprint: chrome

# å¤–éƒ¨æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨ RESTful API æ¥æ§åˆ¶ä½ çš„ Clash å†…æ ¸ï¼ŒAPI ç›‘å¬åœ°å€ï¼Œä½ å¯ä»¥å°† 127.0.0.1 ä¿®æ”¹ä¸º 0.0.0.0 æ¥ç›‘å¬æ‰€æœ‰ IP
external-controller: 0.0.0.0:9090
# å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æº (æ¯”å¦‚ Clash-dashboard) è¿è¡Œåœ¨ Clash API, è·¯å¾„ä¸º API åœ°å€/uiï¼Œå¯ä»¥ä¸ºç»å¯¹è·¯å¾„ï¼Œæˆ–è€… Clash å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„
# external-ui: ui
# è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢ä¸‹è½½åœ°å€
# external-ui-url: 'https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip'
# è‡ªå®šä¹‰ API çš„è®¿é—®å¯†é’¥
secret: ''

# æ›´æ”¹geoipä½¿ç”¨æ–‡ä»¶,mmdbæˆ–è€…dat,å¯é€‰ true/false,trueä¸ºdat,æ­¤é¡¹æœ‰é»˜è®¤å€¼ false
geodata-mode: false
# GEO æ–‡ä»¶åŠ è½½æ¨¡å¼ï¼Œstandardï¼šæ ‡å‡†åŠ è½½å™¨ memconservativeï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
geodata-loader: memconservative
# è‡ªåŠ¨æ›´æ–° GEO
geo-auto-update: true
# æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
geo-update-interval: 24
geox-url:
  geoip: 'https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat'
  geosite: 'https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat'
  mmdb: 'https://github.com/xream/geoip/releases/latest/download/ipinfo.country.mmdb'
  asn: 'https://raw.githubusercontent.com/P3TERX/GeoLite.mmdb/download/GeoLite2-ASN.mmdb'

profile:
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-selected: true 
  # æŒä¹…åŒ– fake-ip å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€
  store-fake-ip: true  

# å—…æ¢åŸŸå
sniffer:               
  # æ˜¯å¦å¯ç”¨å—…æ¢
  enable: true
  # å¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  force-dns-mapping: true
  # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: true
  # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  # override-destination: true
  sniff:
    HTTP:
      # portså­—æ®µï¼Œè¡¨ç¤ºç«¯å£èŒƒå›´ã€‚ç¤ºä¾‹ï¼šports: [80, 8080-8880]
      ports: [80, 8080-8880]
      # override-destinationå­—æ®µï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºè¦†ç›–å…¨å±€override-destinationè®¾ç½®
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  # éœ€è¦å¼ºåˆ¶å—…æ¢çš„åŸŸåï¼ˆé»˜è®¤æƒ…å†µä¸‹åªå¯¹IPè¿›è¡Œå—…æ¢ï¼‰
  force-domain:
    - +.v2ex.com
  # éœ€è¦è·³è¿‡å—…æ¢çš„åŸŸåã€‚ä¸»è¦è§£å†³éƒ¨åˆ†ç«™ç‚¹sniå­—æ®µéåŸŸåï¼Œå¯¼è‡´å—…æ¢ç»“æœå¼‚å¸¸çš„é—®é¢˜ï¼Œå¦‚ç±³å®¶è®¾å¤‡Mijia Cloud
  skip-domain:
    - +.push.apple.com
    - Mijia Cloud
    - dlg.io.mi.com

# Tun é…ç½®  
tun:
  enable: false
  # tun æ¨¡å¼å †æ ˆ,å¯ç”¨å€¼ï¼šsystem/gvisor/mixed
  stack: mixed
  # dnsåŠ«æŒ,ä¸€èˆ¬è®¾ç½®ä¸º any:53 å³å¯, å³åŠ«æŒæ‰€æœ‰53ç«¯å£çš„udpæµé‡
  dns-hijack: [any:53]
  # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥tunç½‘å¡ã€‚
  auto-route: true
  # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  auto-detect-interface: true

dns:
  enable: true
  #ç¼“å­˜ç®—æ³•: lru: æœ€è¿‘æœ€å°‘ä½¿ç”¨ arc: è‡ªé€‚åº”æ›¿æ¢ç¼“å­˜
  cache-algorithm: arc
  # ä¼˜å…ˆä½¿ç”¨ DOH çš„ http/3
  # prefer-h3: true
  # DNSç›‘å¬åœ°å€ï¼Œä»…æ”¯æŒ udp
  listen: 0.0.0.0:1053
  # æ˜¯å¦è§£æ IPV6, å¦‚ä¸º false, åˆ™å›åº” AAAA çš„ç©ºè§£æ
  ipv6: true
  # DNSå¤„ç†æ¨¡å¼ï¼Œå¯é€‰å€¼ normal/fake-ip/redir-host
  enhanced-mode: fake-ip
  # Fake-IPè§£æåœ°å€æ± 
  fake-ip-range: 28.0.0.1/8
  # fakeip è¿‡æ»¤ï¼Œä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥
  # fake-ip-filter": ['+.*']
  fake-ip-filter: ['*', '+.lan', '+.local', '+.direct', '+.market.xiaomi.com', '+.msftconnecttest.com', '+.msftncsi.com', 'localhost.*.qq.com', 'localhost.*.weixin.qq.com']
  # fake-ip-filter: ['*.lan','*.direct', cable.auth.com, '*.msftconnecttest.com', '*.msftncsi.com', network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, '*.srv.nintendo.net', '*.stun.playstation.net', 'xbox.*.microsoft.com', '*.xboxlive.com', 'stun.*', global.turn.twilio.com, global.stun.twilio.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, 'localhost.*.qq.com', 'localhost.*.weixin.qq.com', '*.logon.battlenet.com.cn', '*.logon.battle.net', '*.blzstatic.cn', 'music.163.com', '*.music.163.com', '*.126.net', musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, '*.kuwo.cn', api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, '*.y.qq.com', streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, '*.xiami.com', '*.music.migu.cn', music.migu.cn, proxy.golang.org, '*.mcdn.bilivideo.cn', '*.cmpassport.com', id6.me, 'open.e.189.cn', mdn.open.wo.cn, opencloud.wostore.cn, auth.wosms.cn, '*.jegotrip.com.cn', '*.icitymobile.mobi', '*.pingan.com.cn', '*.cmbchina.com', '*.10099.com.cn', pool.ntp.org, '*.pool.ntp.org', 'ntp.*.com', 'time.*.com', 'ntp?.*.com', 'time?.*.com', 'time.*.gov', 'time.*.edu.cn', '*.ntp.org.cn', 'PDC._msDCS.*.*', 'DC._msDCS.*.*', 'GC._msDCS.*.*']
  # æ­¤è®¾ç½®å†³å®š nameserverã€fallback å’Œ nameserver-policy ä¸­çš„ DNS æœåŠ¡å™¨è¿æ¥æ˜¯å¦éµå¾ª 'rules' ä¸­çš„è§„åˆ™ï¼šå¦‚æœè®¾ç½®ä¸º falseï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œè¿™äº› DNS æœåŠ¡å™¨çš„è¿æ¥å°†ä¸è€ƒè™‘ 'rules' ä¸­çš„è®¾ç½®ï¼Œè€Œé»˜è®¤é‡‡ç”¨ç›´è¿ã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™è¿™äº› DNS æœåŠ¡å™¨çš„è¿æ¥æ–¹å¼ï¼ˆä»£ç†æˆ–ç›´è¿ï¼‰å°†æ ¹æ® 'rules' ä¸­å¯¹å…¶åœ°å€æˆ–åŸŸåçš„å…·ä½“é…ç½®æ¥å†³å®šã€‚ä¾‹å¦‚ï¼Œå¦‚æœ DNS æœåŠ¡å™¨çš„åŸŸåæˆ–åœ°å€åœ¨ 'rules' ä¸­è¢«é…ç½®ä¸ºé€šè¿‡ä»£ç†ï¼Œåˆ™ DNS æŸ¥è¯¢å°†é€šè¿‡ä»£ç†å‘é€ï¼›å¦‚æœé…ç½®ä¸ºç›´è¿ï¼Œåˆ™å°†ç›´è¿å‘é€ã€‚ç‰¹åˆ«æŒ‡å®šçš„è®¾ç½®ï¼ˆå¦‚ 8.8.8.8#RULESï¼‰å°†ä¼˜å…ˆè€ƒè™‘ã€‚ä»…å½“proxy-server-nameserveréç©ºæ—¶å¯ä»¥å¼€å¯æ­¤é€‰é¡¹, å¼ºçƒˆä¸å»ºè®®å’Œprefer-h3ä¸€èµ·ä½¿ç”¨,æ­¤å¤–ï¼Œè¿™ä¸‰è€…é…ç½®ä¸­çš„dnsæœåŠ¡å™¨å¦‚æœå‡ºç°åŸŸåä¼šé‡‡ç”¨default-nameserveré…ç½®é¡¹è§£æï¼Œä¹Ÿè¯·ç¡®ä¿æ­£ç¡®é…ç½®default-nameserver
  respect-rules: false
  # é»˜è®¤ DNS, ç”¨äºè§£æ DNS æœåŠ¡å™¨ çš„åŸŸå,åªæ”¯æŒçº¯ IP
  default-nameserver: ['223.5.5.5', '180.184.1.1']
  # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸå
  proxy-server-nameserver: ['https://doh.pub/dns-query']
  # æŒ‡å®šåŸŸåæŸ¥è¯¢çš„è§£ææœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ geosite, ä¼˜å…ˆäº nameserver/fallback æŸ¥è¯¢
  nameserver-policy:
    # 'geosite:cn': system
    'geosite:private,cn,apple': ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']
    'geosite:category-ads-all': rcode://success
    # 'www.baidu.com,+.google.cn': ['223.5.5.5', 'https://dns.alidns.com/dns-query']
    # 'geosite:gfw,geolocation-!cn': ['https://dns.cloudflare.com/dns-query', 'https://dns.google/dns-query']
  # é»˜è®¤çš„åŸŸåè§£ææœåŠ¡å™¨ï¼Œå¦‚ä¸é…ç½® fallback/proxy-server-nameserver , åˆ™æ‰€æœ‰åŸŸåéƒ½ç”± nameserver è§£æ
  nameserver: ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']
  # åå¤‡åŸŸåè§£ææœåŠ¡å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å¢ƒå¤– DNS, ä¿è¯ç»“æœå¯ä¿¡ é…ç½® fallbackåé»˜è®¤å¯ç”¨ fallback-filter,geoip-codeä¸º cn
  # fallback: ['https://dns.cloudflare.com/dns-query#ğŸ”— ProxyDNS', 'https://dns.google/dns-query#ğŸ”— ProxyDNS']
